<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kurde Store - Admin Panel</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #1c1c1e; color: white; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: #2c2c2e; padding: 30px; border-radius: 20px; border: 1px solid #3a3a3c; }
        h1 { font-size: 24px; margin-bottom: 20px; color: #0a84ff; }
        label { display: block; margin-top: 15px; color: #8e8e93; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 12px; margin-top: 5px; border-radius: 10px; border: 1px solid #3a3a3c; background: #1c1c1e; color: white; box-sizing: border-box; }
        .btn-save { background: #30d158; color: white; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; margin-top: 25px; cursor: pointer; }
        .btn-save:hover { background: #28b84b; }
        .category-group { display: flex; gap: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Add New App/Game</h1>
        <form id="appForm">
            <label>App Name</label>
            <input type="text" id="name" placeholder="e.g. Screen Mirror Pro" required>

            <div class="category-group">
                <div style="flex:1">
                    <label>Category</label>
                    <select id="category">
                        <option value="Apps">Apps</option>
                        <option value="Games">Games</option>
                    </select>
                </div>
                <div style="flex:1">
                    <label>Version</label>
                    <input type="text" id="version" placeholder="1.0.2">
                </div>
            </div>

            <label>App Icon URL</label>
            <input type="text" id="icon" placeholder="https://kurde.store/assets/icon.png">

            <label>Plist URL (for itms-services)</label>
            <input type="text" id="ipa" placeholder="https://kurde.store/plist/app.plist" required>

            <label>App Size (MB)</label>
            <input type="number" id="size" placeholder="107">

            <label>Description</label>
            <textarea id="desc" rows="4" placeholder="What's new?"></textarea>

            <button type="submit" class="btn-save">PUBLISH TO STORE</button>
        </form>
    </div>

    <script>
        const API_URL = "https://wgcdclia51.execute-api.eu-west-2.amazonaws.com";

        document.getElementById('appForm').onsubmit = async (e) => {
            e.preventDefault();
            const data = {
                name: document.getElementById('name').value,
                category: document.getElementById('category').value,
                version: document.getElementById('version').value,
                icon: document.getElementById('icon').value,
                ipa: document.getElementById('ipa').value,
                size: document.getElementById('size').value,
                desc: document.getElementById('desc').value
            };

            try {
                const response = await fetch(`${API_URL}/add-app`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if(response.ok) {
                    alert("Successfully added to Kurde Store!");
                    document.getElementById('appForm').reset();
                } else {
                    alert("Error publishing. Check console.");
                }
            } catch (err) {
                console.error(err);
                alert("Connection failed.");
            }
        };
    </script>
</body>
</html>
